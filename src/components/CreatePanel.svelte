<script lang="ts">
  import { downloadScene, loadSceneFromFile, copyShareUrl } from '../lib/scene'

  let shareStatus = $state('')

  async function handleShare() {
    const ok = await copyShareUrl()
    shareStatus = ok ? 'âœ… ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!' : 'âŒ ë³µì‚¬ ì‹¤íŒ¨'
    setTimeout(() => (shareStatus = ''), 3000)
  }

  async function handleLoad() {
    const ok = await loadSceneFromFile()
    if (!ok) alert('íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')
  }
</script>

<div class="create-panel">
  <section>
    <h3>ğŸ¨ Create Mode</h3>
    <p class="desc">ì¥ë©´ì„ ë§Œë“¤ê³  ì €ì¥/ê³µìœ /ë‚´ë³´ë‚´ê¸° í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
  </section>

  <section>
    <h4>ì¥ë©´ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°</h4>
    <div class="btn-row">
      <button class="action-btn" onclick={() => downloadScene()}>
        ğŸ’¾ JSON ì €ì¥
      </button>
      <button class="action-btn" onclick={handleLoad}>
        ğŸ“‚ ë¶ˆëŸ¬ì˜¤ê¸°
      </button>
    </div>
  </section>

  <section>
    <h4>URL ê³µìœ </h4>
    <button class="action-btn wide" onclick={handleShare}>
      ğŸ”— ê³µìœ  ë§í¬ ë³µì‚¬
    </button>
    {#if shareStatus}
      <p class="status">{shareStatus}</p>
    {/if}
  </section>

  <section>
    <h4>ìŠ¤í¬ë¦°ìƒ· ë‚´ë³´ë‚´ê¸°</h4>
    <p class="placeholder">í˜„ì¬ í™”ë©´ì„ PNGë¡œ ìº¡ì²˜í•©ë‹ˆë‹¤.</p>
    <span class="badge">ì¤€ë¹„ ì¤‘</span>
  </section>

  <section>
    <h4>ë©€í‹° ë ˆì´ì–´</h4>
    <p class="placeholder">ì—¬ëŸ¬ ì´í™íŠ¸ë¥¼ ë™ì‹œì— ê²¹ì³ ê¹Šì´ê°ì„ í‘œí˜„í•©ë‹ˆë‹¤.</p>
    <span class="badge">ì¤€ë¹„ ì¤‘</span>
  </section>
</div>

<style>
  .create-panel {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  section {
    padding: 8px 0;
    border-bottom: 1px solid #333;
  }

  h3 {
    font-size: 14px;
    color: #e0e0e0;
    margin-bottom: 4px;
  }

  h4 {
    font-size: 13px;
    color: #ccc;
    margin-bottom: 6px;
  }

  .desc {
    font-size: 12px;
    color: #888;
    line-height: 1.4;
  }

  .btn-row {
    display: flex;
    gap: 6px;
  }

  .action-btn {
    flex: 1;
    padding: 8px 8px;
    background: #2a3040;
    border: 1px solid #555;
    border-radius: 6px;
    color: #ddd;
    font-size: 12px;
    cursor: pointer;
    transition: background 0.2s;
  }

  .action-btn:hover {
    background: #3a4560;
  }

  .action-btn.wide {
    flex: none;
    width: 100%;
  }

  .status {
    font-size: 11px;
    color: #8ab4f8;
    margin-top: 4px;
  }

  .placeholder {
    font-size: 12px;
    color: #666;
    font-style: italic;
  }

  .badge {
    display: inline-block;
    margin-top: 4px;
    padding: 2px 8px;
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid #444;
    border-radius: 10px;
    font-size: 10px;
    color: #888;
  }
</style>
